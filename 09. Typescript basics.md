---
---


## 9. Typescript basics

### Kas yra TypeScript? 
TypeScript yra atvirojo kodo programavimo kalba, kuriÄ… sukÅ«rÄ— Microsoft. Ji yra JavaScript superset'as, pridedantis statinÄ¯ tipÅ³ tikrinimÄ…. 

### TypeScript privalumai
 - Statinis tipÅ³ tikrinimas
 - GeresnÄ— kodo struktÅ«ra ir organizacija
 - Padeda iÅ¡vengti klaidÅ³ 
 - Geresnis IDE palaikymas
 
### TypeScript diegimas
NorÄ—dami Ä¯diegti TypeScript, naudokite npm:

```ts
	npm install -g typescript
```

### Pirmasis TypeScript failas

Sukurkite failÄ… `hello.ts`

```ts
	function greet(name: string): string {
	    return `Hello, ${name}!`;
	}

	console.log(greet('World'));
```

Kompiliuokite TypeScript failÄ… Ä¯ JavaScript:

`tsc hello.ts`

Paleiskite JavaScript failÄ…:

`node hello.js`

###  Pagrindai

#### Kintamieji ir jÅ³ tipai

TypeScript leidÅ¾ia apibrÄ—Å¾ti kintamÅ³jÅ³ tipus.

```ts
	let isDone: boolean = false;
	let count: number = 42;
	let userName: string = 'John';
	let numbers: number[] = [1, 2, 3, 4];
	let anything: any = 'Hello';
```

### SÄ…sajos (Interfaces)

SÄ…sajos naudojamos apibrÄ—Å¾ti objektÅ³ struktÅ«rÄ….

```ts
	interface User {
	    name: string;
	    age: number;
	}

	const user: User = {
	    name: 'Alice',
	    age: 30
	};
```

### Funkcijos

Funkcijos gali turÄ—ti tipÅ³ anotacijas tiek parametrams, tiek grÄ…Å¾inamajai reikÅ¡mei.

```ts
	function add(a: number, b: number): number {
	    return a + b;
	}

	const add = (a: number, b: number): number => {
	    return a + b;
	}

	const sum = add(5, 10);
```

### SÄ…jungos (Union) ir Sankirtos (Intersection) tipai

SÄ…jungos tipai leidÅ¾ia kintamajam turÄ—ti daugiau nei vienÄ… tipÄ….

```ts
	let value: string | number;
	value = 'Hello';
	value = 42;

	interface Person {
	    name: string;
	}

	interface Employee {
	    employeeId: number;
	}

	type EmployeePerson = Person & Employee;

	const emp: EmployeePerson = {
	    name: 'Bob',
	    employeeId: 123
	};
```
	
#### Daugiau pavyzdÅ¾iÅ³

```ts
	// Funckija, kuri priima string tipo argumentÄ… ir grÄ…Å¾ina string tipo reikÅ¡mÄ™
	function greet(name: string): string {
	  return `Hello, ${name}!`;
	}

	// Funkcinis iÅ¡raiÅ¡ka (arrow function), kuri priima du number tipo argumentus ir grÄ…Å¾ina number tipo reikÅ¡mÄ™
	const add = (a: number, b: number): number => {
	  return a + b;
	};

	// SÄ…saja apibrÄ—Å¾ia objektÄ…, kuriame yra name laukas su string tipo reikÅ¡me
	interface Person {
	  name: string;
	}

	// SÄ…saja apibrÄ—Å¾ia objektÄ…, kuriame yra employeeId laukas su number tipo reikÅ¡me
	interface Employee {
	  employeeId: number;
	}

	// Naujas tipas, kuris yra dviejÅ³ sÄ…sajÅ³ (Person ir Employee) sujungimas
	type EmployeePerson = Person & Employee;

	// Sukuriamas objektas emp, kuris atitinka EmployeePerson tipÄ…
	const emp: EmployeePerson = {
	  name: "Bob",
	  employeeId: 123,
	};

	// IÅ¡vedama Ä¯ konsolÄ™ funkcijos greet kvietimo rezultatas su argumentu "World"
	console.log(greet("World"));

	// Kintamasis su union tipu, kuris gali bÅ«ti arba string, arba number tipo
	let identifier: string | number;

	identifier = "abc"; // Teisinga
	identifier = 123; // Teisinga
	// identifier = true; // Klaida, nes boolean nÄ—ra dalis union tipo

	// Funkcija, kuri priima masyvÄ… ir grÄ…Å¾ina jo pirmÄ…jÄ¯ elementÄ…
	function getFirstElement<T>(arr: T[]): T {
	  return arr[0];
	}

	const numArray = [1, 2, 3];
	const strArray = ["a", "b", "c"];

	console.log(getFirstElement(numArray)); // IÅ¡veda: 1
	console.log(getFirstElement(strArray)); // IÅ¡veda: a

	// Enum, kuris apibrÄ—Å¾ia keletÄ… konstantÅ³
	enum Direction {
	  Up = "UP",
	  Down = "DOWN",
	  Left = "LEFT",
	  Right = "RIGHT"
	}

	const move = (dir: Direction): void => {
	  console.log(`Moving ${dir}`);
	}

	move(Direction.Up); // IÅ¡veda: Moving UP

	// SÄ…lyginis tipas
	type IsNumber<T> = T extends number ? "Number" : "Not a Number";

	type Test1 = IsNumber<number>; // Test1 yra "Number"
	type Test2 = IsNumber<string>; // Test2 yra "Not a Number"

	// ObjektÅ³ masyvas su sÄ…sajomis ir union tipais
	interface Dog {
	  breed: string;
	  bark(): void;
	}

	interface Cat {
	  breed: string;
	  purr(): void;
	}

	type Pet = Dog | Cat;

	const pets: Pet[] = [
	  {
	    breed: "Labrador",
	    bark: () => console.log("Woof!"),
	  },
	  {
	    breed: "Siamese",
	    purr: () => console.log("Purr..."),
	  }
	];

	// Patikrinimas ir iÅ¡kvietimas pagal tipÄ…
	pets.forEach(pet => {
	  if ('bark' in pet) {
	    pet.bark();
	  } else {
	    pet.purr();
	  }
	});

	// SÄ…lyginÄ— tipÅ³ kontrolÄ— su typeof
	function double(value: number | string): number | string {
	  if (typeof value === 'number') {
	    return value * 2;
	  } else {
	    return value.repeat(2);
	  }
	}

	console.log(double(10)); // IÅ¡veda: 20
	console.log(double("Hi")); // IÅ¡veda: HiHi

	// Tipas, kuris gali bÅ«ti null arba number
	let nullableNumber: number | null = null;
	nullableNumber = 42; // Teisinga

	// GenerinÄ— funkcija su numatytÄ…ja reikÅ¡me
	function identity<T = string>(value: T): T {
	  return value;
	}

	console.log(identity(123)); // IÅ¡veda: 123
	console.log(identity("Hello")); // IÅ¡veda: Hello
```
### Typescript Reacte

#### 1. Paprastas Funkcinis Komponentas

```tsx
	const HelloWorld: React.FC = () => {
	  return <h1>Hello, World!</h1>;
	}

	export default HelloWorld;
```

React.FC nebÅ«tinas, taÄiau jis pakeiÄia tipÄ… Ä¯ Functional Component, kitu atveju komponentas lieka JSX.Element

#### 2. Komponentas su Props

```tsx
	interface GreetingProps {
	  name: string;
	}

	const Greeting: React.FC<GreetingProps> = ({ name }) => {
	  return <h1>Hello, {name}!</h1>;
	}

	export default Greeting;
```

arba 

```tsx
	interface GreetingProps {
	  name: string;
	}

	const Greeting = ({ name }: GreetingProps) => {
	  return <h1>Hello, {name}!</h1>;
	}

	export default Greeting;
```

#### 3. Komponentas su `useState`

State tipas yra nurodytas, bet nebÅ«tinas Å¡iuo atveju, nes React automatiÅ¡kai supranta tipÄ… pagal initial value 0.

```tsx
	import { useState } from 'react';

	const Counter: React.FC = () => {
	  const [count, setCount] = useState<number>(0);
	  // arba
	  // const [count, setCount] = useState(0);
	  return (
	    <div>
	      <p>You clicked {count} times</p>
	      <button onClick={() => setCount(count + 1)}>
	        Click me
	      </button>
	    </div>
	  );
	}

	export default Counter;
```

Vieno objekto pavyzdys:

```tsx
	import { useEffect, useState } from 'react';

	interface Post {
	  userId: number;
	  id: number;
	  title: string;
	  body: string;
	}

	const PostDetails: React.FC = () => {
	  const [post, setPost] = useState<Post | null>(null);
	  const [loading, setLoading] = useState<boolean>(true);

	  useEffect(() => {
	    fetch('https://jsonplaceholder.typicode.com/posts/1')
	      .then(response => response.json())
	      .then(data => {
	        setPost(data);
	        setLoading(false);
	      });
	  }, []);

	  if (loading) {
	    return <div>Loading...</div>;
	  }

	  if (!post) {
	    return <div>No post found</div>;
	  }

	  return (
	    <div>
	      <h1>{post.title}</h1>
	      <p>{post.body}</p>
	      <small>Post ID: {post.id}</small>
	    </div>
	  );
	}

	export default PostDetails;
```

Array pavyzdys:

```tsx
	import { useEffect, useState } from 'react';

	interface User {
	  id: number;
	  name: string;
	  username: string;
	  email: string;
	}

	const UsersList: React.FC = () => {
	  const [users, setUsers] = useState<User[]>([]);
	  const [loading, setLoading] = useState<boolean>(true);
	  const [error, setError] = useState<string | null>(null);

	  useEffect(() => {
	    fetch('https://jsonplaceholder.typicode.com/users')
	      .then(response => response.json())
	      .then((data) => {
	        setUsers(data);
	        setLoading(false);
	      })
	      .catch(error => {
	        setError(error.message);
	        setLoading(false);
	      });
	  }, []);

	  if (loading) {
	    return <div>Loading...</div>;
	  }

	  if (error) {
	    return <div>Error: {error}</div>;
	  }

	  return (
	    <ul>
	      {users.map(user => (
	        <li key={user.id}>
	          {user.name} ({user.username}) - {user.email}
	        </li>
	      ))}
	    </ul>
	  );
	}

	export default UsersList;
```

### Typescript inicializavimas React projekte

#### Naujo projekto kÅ«rimas

`npm create vite@latest`  Pasirenkant Typescript kaip opcijÄ….

#### Jau esamo projekto

**Step 1/6**  
Ä®raÅ¡yti dev dependencies

npm install -D typescript @types/react @types/react-dom

**Step 2/6**  
 `packages.json` faile pakeisti:

```tsx
"build": "vite build"

```

Ä¯ ğŸ‘‡

```tsx
"build": "tsc && vite build"

```

**Step 3/6**

Pervadinti  `vite.config.js`  ir  `main.jsx`  Ä¯  `vite.config.ts`  ir  `main.tsx`

**Step 4/6**  
Sukonfiguruoti Typescript sukuriant du failus root folderyje:
`tsconfig.json`

```json
	{
	  "compilerOptions": {
	    "target": "ESNext",
	    "useDefineForClassFields": true,
	    "lib": ["DOM", "DOM.Iterable", "ESNext"],
	    "allowJs": false,
	    "skipLibCheck": true,
	    "esModuleInterop": false,
	    "allowSyntheticDefaultImports": true,
	    "strict": true,
	    "forceConsistentCasingInFileNames": true,
	    "module": "ESNext",
	    "moduleResolution": "Node",
	    "resolveJsonModule": true,
	    "isolatedModules": true,
	    "noEmit": true,
	    "jsx": "react-jsx"
	  },
	  "include": ["src"],
	  "references": [{ "path": "./tsconfig.node.json" }]
	}
```

`tsconfig.node.json`

```json
	{
	  "compilerOptions": {
	    "composite": true,
	    "module": "ESNext",
	    "moduleResolution": "Node",
	    "allowSyntheticDefaultImports": true
	  },
	  "include": ["vite.config.ts"]
	}
```

**Step 5/6**

Sukurti failÄ… pavadinimu  `vite-env.d.ts` , Ä¯kelti Ä¯  `src/`  folderÄ¯ ir nukopijuoti Å¡itÄ… eilutÄ™ su /// slashais

> Failas â€d.tsâ€œ naudojamas typescript tipo informacijai apie API, kuris paraÅ¡ytas su JavaScript

```ts
/// <reference types="vite/client" />

```

**Step 6/6**

`index.html`  faile pakeisti skripto pavadinimÄ… iÅ¡  `main.jsx`  Ä¯  `main.tsx` 

```html
    <script type="module" src="/src/main.tsx"></script>
```

**Finished** 

Pabaigus rekomenduojama iÅ¡jungti ir Ä¯jungti VS Code tam, kad susikalibruotÅ³ Typescript konfigÅ«racijos, kitu atveju ES-lint gali rodyti errorus.

### Typescript inicializavimas Node.js projekte

Node.js neturi oficialaus vienos eilutÄ—s skripto sukÅ«rimo, todÄ—l reikia atlikti viskÄ… ranka step by step.

**Step 1/7 Inicijuokite TypeScript** 

Pirmiausia reikia Ä¯diegti TypeScript ir Node.js tipÅ³ apraÅ¡us:

`npm install --save-dev typescript @types/node` 

arba

`yarn add typescript @types/node -D`

**Step 2/7 Sukurkite `tsconfig.json`** 

Sukurkite `tsconfig.json` failÄ… projekto root kataloge. Å is failas turÄ—s TypeScript kompiliatoriaus konfigÅ«racijÄ….

Galite sugeneruoti bazinÄ¯ `tsconfig.json` naudodami Å¡iÄ… komandÄ…:

`npx tsc --init` 

Tada galite modifikuoti sugeneruotÄ… `tsconfig.json` failÄ… pagal poreikius. Å tai bazinis pavyzdys:

```json
	{
	  "compilerOptions": {
	    "target": "es6",                          // Nustato ECMAScript tikslinÄ™ versijÄ…
	    "module": "commonjs",                     // Nustato modulio kodo generavimÄ…
	    "outDir": "./dist",                       // Nustato iÅ¡vesties struktÅ«rÄ… Ä¯ Å¡Ä¯ katalogÄ…
	    "rootDir": "./src",                       // Nustato Ä¯vesties failÅ³ Å¡akninÄ¯ katalogÄ…
	    "strict": true,                           // Ä®jungia visus grieÅ¾tus tipo tikrinimo nustatymus
	    "esModuleInterop": true,                  // Ä®galina suderinamumÄ… su CommonJS ir ES moduliais
	    "skipLibCheck": true,                     // PraleidÅ¾ia deklaracijÅ³ failÅ³ tikrinimÄ…
	    "forceConsistentCasingInFileNames": true  // DraudÅ¾ia nevienodai atitinkanÄius failÅ³ pavadinimus
	  },
	  "include": ["src"],                         // Ä®traukia visus failus iÅ¡ "src" katalogo
	  "exclude": ["node_modules"]                 // IÅ¡skiria "node_modules" katalogÄ…
	}
```

*Norint naudoti Å¡itÄ… konfigÅ«racijÄ…, persikelkite serverio failus Ä¯ **/src** folderÄ¯*

**Step 3/7 Pervardinkite Failus Ä¯ `.ts`** 

Pervardinkite savo `.js` failus Ä¯ `.ts` 


**Step 4/7 Atnaujinkite importus ir iÅ¡taisykite klaidas** 

Kai konvertuojate failus, gali tekti atnaujinti importus ir iÅ¡sprÄ™sti tipo klaidas. PavyzdÅ¾iui, jei naudojate modulio importavimÄ…, Ä¯sitikinkite, kad jis turi tinkamus tipus. Pvz.: `@types/bcryptjs`, `@types/cors`, `@types/express`, `@types/jsonwebtoken`


**Step 5/7 Atnaujinkite `package.json` skriptus** 

Atnaujinkite `scripts` sekcijÄ… `package.json` faile, kad Ä¯trauktumÄ—te TypeScript komandas.

```json
	{
	  "scripts": {
	    "build": "tsc",
	    "start": "node dist/index.js",
	    "dev": "nodemon"
	  }
	}
```

**Step 6/7 PridÄ—kite nodemon palaikymÄ… TypeScript projektui** 

Ä®diekite papildomÄ… modulÄ¯ `ts-node` ir pridÄ—kite `nodemon.json` failÄ… root folderyje su turininiu.

`npm install --save-dev ts-node` arba `yarn add ts-node -D`

**nodemon.json**

```json
	{
	  "watch": ["src"],
	  "ext": ".ts,.js",
	  "exec": "ts-node ./src/index.ts"
	}
```

**Step 7/7 Kompiliuokite projektÄ…** 

Kompiliuokite savo projektÄ…, kad patikrintumÄ—te klaidas ir sugeneruotumÄ—te JavaScript failus `dist` kataloge. `dist` katalogas laikys jÅ«sÅ³ kodÄ… iÅ¡verstÄ… Ä¯ JavaScript.

`npm run build`  arba `yarn build`

**Finished** 

Norint paleisti projektÄ… standartiniu bÅ«dÅ³ naudojam `yarn start`, o norint developmentui `yarn dev`.


### PavyzdinÄ— Projekto StruktÅ«ra

Å tai kaip gali atrodyti jÅ«sÅ³ projekto struktÅ«ra:

	mano-node-projektas/
	â”œâ”€â”€ dist/
	â”‚   â””â”€â”€ ...sugeneruoti JavaScript failai...
	â”œâ”€â”€ node_modules/
	â”œâ”€â”€ src/
	â”‚   â”œâ”€â”€ index.ts
	â”‚   â””â”€â”€ ...kiti TypeScript failai...
	â”œâ”€â”€ package.json
	â”œâ”€â”€ tsconfig.json
	â””â”€â”€ ...kiti failai...


## UÅ¾duotys

### 1. UÅ¾duotis: Basics

**UÅ¾duotis**: Sukurkite funkcijÄ… `sum`, kuri priima du parametrus `a` ir `b` (abu tipo `number`) ir grÄ…Å¾ina jÅ³ sumÄ… (taip pat tipo `number`).

**UÅ¾duotis**: Sukurkite interface `Person`, kuri turi laukus `name` (tipo `string`) ir `age` (tipo `number`). Sukurkite funkcijÄ… `greet`, kuri priima `Person` tipo objektÄ… ir grÄ…Å¾ina pasisveikinimo Å¾inutÄ™ (tipo `string`).

**UÅ¾duotis**: Sukurkite array, kuris talpina `number` tipo reikÅ¡mes. ParaÅ¡ykite funkcijÄ… `getFirstElement`, kuri priima `number` tipo parametrÄ… ir grÄ…Å¾ina pirmÄ…jÄ¯ elementÄ… iÅ¡ array.

**UÅ¾duotis**: Sukurkite `enum` tipo `Color`, kuriame yra reikÅ¡mÄ—s `Red`, `Green` ir `Blue`. ParaÅ¡ykite funkcijÄ… `getColorName`, kuri priima `Color` tipo parametrÄ… ir grÄ…Å¾ina spalvos pavadinimÄ… (tipo `string`).

**UÅ¾duotis**: Sukurkite paprastÄ… funkcinÄ¯ komponentÄ… `Hello`, kuris priima `name` prop (tipo `string`) ir grÄ…Å¾ina pasisveikinimo Å¾inutÄ™.

**UÅ¾duotis**: Sukurkite komponentÄ… `ItemList`, kuris priima `items` prop (masyvas, kurio elementai yra `string`). Å is komponentas turÄ—tÅ³ rodyti sÄ…raÅ¡Ä… elementÅ³.

**UÅ¾duotis**: Sukurkite komponentÄ… `UserProfile`, kuris priima `user` prop (turÄ—tÅ³ bÅ«ti `User` tipo). `User` sÄ…saja turi laukus `name` (tipo `string`) ir `age` (tipo `number`). Komponentas turÄ—tÅ³ rodyti vartotojo informacijÄ….

### 2. UÅ¾duotis: Home service aplikacija

 - Integruoti Typescript palaikymÄ…
 - Refactorinti visÄ… kodÄ… iÅ¡ Javascript Ä¯ Typescript



